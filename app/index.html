<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <link rel="icon" type="image/svg+xml" href="/vite.svg" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>MolViewSpec Live</title>
        <link rel="stylesheet" href="/src/styles.css" />
        <!-- Load Molstar library -->
        <script src="https://cdn.jsdelivr.net/npm/molstar@latest/build/viewer/molstar.js"></script>
        <link
            rel="stylesheet"
            type="text/css"
            href="https://cdn.jsdelivr.net/npm/molstar@latest/build/viewer/molstar.css"
        />
    </head>
    <body>
        <h2>Python Implementation</h2>
        <div id="app"></div>
        <br />
        <h2>JavaScript Implementation</h2>
        <div id="app_js"></div>
        <script type="module">
            import { appInit } from "/src/main.mjs";
            const app_div = document.querySelector("#app");
            const app_js_div = document.querySelector("#app_js");
            const init_code = `from molviewspec import create_builder
import json

builder = create_builder()
structure = (builder
  .download(url="https://www.ebi.ac.uk/pdbe/entry-files/download/1cbs_updated.cif")
  .parse(format="mmcif")
  .model_structure()
  .component()
  .representation()
  .color(color="blue")
)
builder.get_state().dumps()
`;
            const init_js_code = `// Simple example JS implementation
// When fully implemented, this would create molviewspec JSON
window.__molViewSpecResult = {
  "root": {
    "state_tree": {
      "download": [
        {
          "url": "https://www.ebi.ac.uk/pdbe/entry-files/download/1cbs_updated.cif",
          "binary": false
        }
      ],
      "parse": [
        {
          "format": "mmcif",
          "id": "parsed-0"
        }
      ],
      "model": [
        {
          "type": "structure",
          "props": {
            "parsed_data_ref": "parsed-0"
          },
          "id": "model-0"
        }
      ],
      "component": [
        {
          "model_ref": "model-0",
          "selector": {},
          "id": "component-0"
        }
      ],
      "representation": [
        {
          "component_ref": "component-0",
          "type": "cartoon",
          "color": "blue",
          "id": "representation-0"
        }
      ]
    }
  }
};
`;
            // Initialize Python app
            appInit(app_div, null, init_code, "python");
            
            // Initialize JS app
            appInit(app_js_div, null, init_js_code, "js");
        </script>
    </body>
</html>